
---

# **ğŸ”¥ LAM3 â€“ Joint Synergyâ€“Inconsistency Analysis Daily Report**

**Date: 2025-11-19**

---

# **1. Overview**

ä»Šæ—¥å·¥ä½œå›´ç»• **å¤šæ¨¡æ€è¶Šç‹±è¡Œä¸ºçš„è”åˆæ”¾å¤§æœºåˆ¶ï¼ˆSynergy Ã— Inconsistencyï¼‰** å±•å¼€ï¼ŒæˆåŠŸå®Œæˆäº†ä»¥ä¸‹æ ¸å¿ƒè¿›å±•ï¼š

* **å®Œæ•´é‡æ„ `synergy_joint_logreg.py`**ï¼šæ”¯æŒ Sã€Iã€SÃ—I ç‰¹å¾çš„æ„å»ºä¸ Logistic å›å½’å»ºæ¨¡ã€‚
* **ä¸‰ç±»æ ‡ç­¾å»ºæ¨¡**ï¼š
  (1) ASRï¼ˆè¶Šç‹±æˆåŠŸï¼‰
  (2) Refusalï¼ˆæ‹’ç­”ï¼‰
  (3) High-riskï¼ˆæ¯’æ€§ â‰¥ 0.8ï¼‰
* **å®Œæˆå¤šç±»å‹å›¾è¡¨ç»˜åˆ¶**ï¼šåŒ…å« 8 ç§å¯è§£é‡Šæ€§å¯è§†åŒ–ï¼Œå¯¹ç ”ç©¶çš„å®šæ€§ä¸å®šé‡ç»“è®ºæ”¯æ’‘åŠ›åº¦æå¼ºã€‚
* **æ ¸å¿ƒç»“è®ºå¾—åˆ°å®è¯éªŒè¯**ï¼šååŒå¢å¼º S ä¸è·¨æ¨¡æ€ä¸ä¸€è‡´ I å­˜åœ¨åŒå› å­æ”¾å¤§æ•ˆåº”ï¼Œå¹¶ç”± J(x) = SÂ·(1+I) ç­‰å¼è‰¯å¥½æ•è·ã€‚

æ•´ä½“æ¥çœ‹ï¼Œä»Šå¤©çš„è¿›å±•å°†å¤§å¹…å¼ºåŒ–è®ºæ–‡çš„æ–¹æ³•è®ºä¸å®éªŒç« èŠ‚ï¼Œä½¿ LAM3 çš„å¤šæ¨¡æ€è¶Šç‹±è§£é‡Šæœºåˆ¶å…·å¤‡äº†**å¯é‡åŒ–ã€å¯è§†åŒ–ã€å¯éªŒè¯**çš„æ”¯æ’‘é€»è¾‘ã€‚

---

# **2. Parameters & Settings**

### **Dataset / Input Source**

* æ–‡ä»¶ï¼š`inconsistency_with_D_qwen.jsonl`ï¼ˆ280 ä¸ªæœ‰æ•ˆ IDï¼‰
* æ¨¡æ€ï¼š`txt_img / txt_only / img_only / none`
* è¯„æµ‹æŒ‡æ ‡ï¼šASR, refusal, toxicity, cross-modal inconsistency D(x)

### **Feature Construction**

* ååŒå¢å¼ºï¼š
  **S = max(0, R_tv - max(R_t0, R_0v))**
* ä¸ä¸€è‡´æ€§å½’ä¸€åŒ–ï¼š
  **I = normalize(D(x)) âˆˆ [0, 1]**
* äº¤äº’é¡¹ï¼š
  **SI = S Ã— I**

### **Labels**

* **y_asr**ï¼š`txt_img` æ˜¯å¦æ”»å‡»æˆåŠŸ
* **y_risk**ï¼šR_tv â‰¥ 0.8
* **y_refusal**ï¼š`txt_img` æ˜¯å¦æ‹’ç­”

### **Model**

* Logistic Regression (L2, lbfgs)
* max_iter=200

### **Visualizations Generated**

å…± 8 ç±»å›¾è¡¨ï¼Œæ¶‰åŠï¼š

1. J-score å…¨ä½“åˆ†å¸ƒ
2. J-score åˆ†å¸ƒï¼ˆASR+ / ASRâˆ’ åˆ†å±‚ï¼‰
3. ASR åœ¨ (S, I) å¹³é¢çš„æ•£ç‚¹åˆ†å¸ƒ
4. Refusal åœ¨ (S, I) çš„æ•£ç‚¹åˆ†å¸ƒ
5. High-risk åœ¨ (S, I) çš„æ•£ç‚¹åˆ†å¸ƒ
6. Logistic surface: ASR
7. Logistic surface: Risk
8. é¢„æµ‹æ›²çº¿ï¼ˆå›ºå®š Iï¼Œè§‚å¯Ÿ S å˜åŒ–å¯¹æ¦‚ç‡çš„å½±å“ï¼‰

---

# **3. Key Observations / Results**

### **3.1 S ä¸ I çš„ç»Ÿè®¡ç‰¹æ€§**

```
S: min=0.000, max=1.000, mean=0.6179
I: min=0.000, max=1.000, mean=0.4886
ASR : pos=184, neg=96
Risk: pos=165, neg=115
Refusal: pos=53,  neg=227
```

---

### **3.2 Logistic Regression å­¦åˆ°çš„ç³»æ•°**

#### **ASR model**

```
intercept = -2.7592
S      = +5.6639
I      = -0.1528
S * I  = +2.4174
```

ğŸ“Œ **è§£é‡Šï¼š**

* **S æ˜¯æœ€å¼ºä¸»æ•ˆåº”** â†’ ååŒè¶Šå¼ºï¼Œè¶Šç‹±è¶Šå®¹æ˜“
* **I å•ç‹¬å½±å“å¼±** â†’ ä¸ä¸€è‡´ä¸æ˜¯ä¸»è¦å•å› å­å› ç´ 
* **SÃ—I äº¤äº’æ˜¾è‘—ä¸ºæ­£** â†’ ä¸ä¸€è‡´æ€§ä¼šæ”¾å¤§ååŒå¼ºåº¦
  â†’ ç®€ç§° **åŒå› å­æ”¾å¤§æ¨¡å‹**ï¼ˆcentral contributionï¼‰

---

#### **Refusal model**

```
S      = -3.7761
I      = +2.1529
S * I  = -1.8430
```

ğŸ“Œ **è§£é‡Šï¼š**

* å¼ºååŒ S â†’ ä¼šè®©æ¨¡å‹æ›´æ„¿æ„â€œæ‰§è¡Œâ€ï¼ˆæ‹’ç»å‡å¼±ï¼‰
* é«˜ä¸ä¸€è‡´ I â†’ å¢åŠ æ‹’ç­”å€¾å‘
* äºŒè€…å‘ˆå¯¹ç«‹å…³ç³»ï¼Œå®Œå…¨ç¬¦åˆç›´è§‰è¡Œä¸º

---

#### **High-Risk modelï¼ˆR_tvâ‰¥0.8ï¼‰**

```
intercept = -3.5441
S      = +5.3760
I      = -0.4151
S * I  = +2.0915
```

ğŸ“Œ **è§£é‡Šï¼š**

* æ¯’æ€§é£é™©ä¸æ”»å‡»æˆåŠŸ ASR çš„å»ºæ¨¡å‡ ä¹ä¸€è‡´
* å†æ¬¡è¯æ˜ï¼š**è¶Šç‹±æˆåŠŸ â‰ˆ æ¨¡å‹å®‰å…¨å¤±å®ˆçš„ proxy**

---

### **3.3 å›¾è¡¨æ´å¯Ÿï¼ˆæ ¸å¿ƒç»“è®ºï¼‰**

#### **â‘  J-score åˆ†å¸ƒï¼šä¸¤ç±»æ•°æ®å¤©ç„¶åˆ†ç¦»**

* ASR=0ï¼šJ âˆˆ [0, 0.25]
* ASR=1ï¼šJ âˆˆ [1.0, 1.8]

â†’ **å‘ˆç°å¼ºçƒˆçš„çº¿æ€§å¯åˆ†æ€§**

---

#### **â‘¡ (S, I) å¹³é¢çš„æ•£ç‚¹å›¾**

* ASR=1 çš„ç‚¹é›†ä¸­åœ¨ **å³ä¸Šè§’ (é«˜ Sï¼Œé«˜ I)**
* Refusal=1 çš„ç‚¹é›†ä¸­åœ¨ **å·¦ä¸Šè§’ (ä½ Sï¼Œé«˜ I)**

â†’ å¤šæ¨¡æ€è¡Œä¸ºè¿›å…¥ä¸¤å¤§æ¨¡å¼ï¼š
**æ‰§è¡Œæ¨¡å¼**ï¼ˆé«˜ Sï¼‰ vs **è°¨æ…æ¨¡å¼**ï¼ˆé«˜ Iï¼‰

---

#### **â‘¢ Logistic Surfaceï¼ˆASR/Riskï¼‰**

* S ä» 0â†’1ï¼ŒASR ä» 0â†’0.95
* I çš„å­˜åœ¨ä½¿æ•´å¼ æ›²é¢æ˜¾è‘—æŠ¬å‡
* æ›²é¢ä¸æ˜¯çº¿æ€§çš„ â†’ **SÃ—I äº¤äº’å¿…ä¸å¯å°‘**

---

#### **â‘£ å›ºå®š I çš„æ¨ªæˆªé¢æ›²çº¿ï¼š**

ä¸‰æ¡æ›²çº¿ï¼š

* I=0 â†’ æœ€ä½
* I=0.5 â†’ ä¸­
* I=1 â†’ æœ€é«˜

â†’ æ˜ç¡®å±•ç¤ºâ€œä¸ä¸€è‡´æ€§ä½œä¸ºååŒå¢ç›Šå€å¢å™¨â€çš„ä½œç”¨ã€‚

---

# **4. Issues & Bug Tracking**

### **å·²ä¿®å¤çš„é—®é¢˜**

* `plot_J_hist()` å‚æ•°å†²çªï¼šå·²é‡æ„ä¸ºæ ‡å‡†è°ƒç”¨æ ¼å¼ã€‚
* S,I,SI çš„æ„é€ é€»è¾‘ç»Ÿä¸€ï¼Œé¿å… key errorã€‚
* `R_tv` ç¼ºå¤± id é—®é¢˜å·²å¤„ç†ï¼ˆè·³è¿‡æ—  txt_img çš„è¡Œï¼‰ã€‚

### **å¾…å¤„ç†çš„é—®é¢˜**

* å¯¹äº S=0 çš„æ•°æ®ç‚¹æ•°é‡å¤šï¼Œæ˜¯å¦éœ€è¦å•ç‹¬å»ºæ¨¡ï¼ˆbaseline regionï¼‰ã€‚
* I çš„å½’ä¸€åŒ–æ˜¯å¦éœ€è¦ test-time æƒé‡å¹³æ»‘ï¼ˆç›®å‰ä½¿ç”¨ Minâ€“Maxï¼‰ã€‚

---

# **5. Next Actions**

### **ï¼ˆ1ï¼‰åŠ å…¥ J-score çš„ ROC / AUC åˆ†æ**

* éªŒè¯ J(x) æ˜¯å¦å¯ä½œä¸ºè¶Šç‹±é¢„æµ‹å™¨
* è¾“å‡º AUC(ASR), AUC(Refusal), AUC(Risk)

### **ï¼ˆ2ï¼‰åŠ å…¥è¾¹é™…æ•ˆåº”å›¾ï¼ˆMarginal Effectsï¼‰**

* âˆ‚P/âˆ‚S | I
* âˆ‚P/âˆ‚I | S

æœ‰åŠ©äºè®ºæ–‡çš„å› æœè§£é‡Šéƒ¨åˆ†ã€‚

### **ï¼ˆ3ï¼‰å¼•å…¥ Shapley / IG è§£é‡Šæ¨¡å‹å‚æ•°**

ç”¨äºè§£é‡Š Logistic æ¨¡å‹çš„è´¡çŒ®åº¦ã€‚

### **ï¼ˆ4ï¼‰æ’°å†™è®ºæ–‡ Results Sectionï¼ˆæˆ‘å¯å¸®ä½ ï¼‰**

å†…å®¹åŒ…å«ï¼š

* Figure 3: Joint Synergyâ€“Inconsistency scatter
* Figure 4: Logistic surfaces
* Figure 5: J-score distributions
* Figure 6: Cross-sectional curves

### **ï¼ˆ5ï¼‰ä»£ç æ•´åˆä¸æ¨¡å—åŒ–**

å°†æ‰€æœ‰ç»˜å›¾å‡½æ•°è¿ç§»è‡³ï¼š

```
src/metrics/plots/
```

---

# **6. Commit & Sync**

### å»ºè®® commit messageï¼š

```
feat(metrics): add full joint Sâ€“I logistic modeling + 8 visualization plots

- Implemented synergy_joint_logreg.py with S/I/SxI features
- Added ASR, Risk, Refusal logistic models
- Added J-score histogram, grouped distribution, bucket bars
- Added scatter & cross-sectional predicted probability plots
- Fixed plot_J_hist signature and call patterns
- Updated data loader for risk & inconsistency
```

---

